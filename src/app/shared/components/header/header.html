<header>
  <div class="container header-container">
    <!-- LOGO -->
    <div class="logo">
      <i class="fas fa-map-marker-alt"></i> Start<span>Io</span>
    </div>

    <!-- NAV -->
    <nav [class.active]="menuOpen">
      <ul>
        <li><a routerLink="/inicio" (click)="closeMenu()">Inicio</a></li>
        <li><a routerLink="/catalogo" (click)="closeMenu()">Catálogo</a></li>
        <li><a routerLink="/servicios" (click)="closeMenu()">Servicios</a></li>
        <li><a routerLink="/testimonios" (click)="closeMenu()">Testimonios</a></li>
        <li><a routerLink="/contacto" (click)="closeMenu()">Contacto</a></li>
      </ul>
    </nav>

    <!-- ACCIONES -->
    <div class="header-actions">
      <!-- BOTÓN TEMA -->
      <button class="theme-toggle" (click)="toggleTheme()">
        <i class="fa-solid" [ngClass]="themeService.isDarkTheme() ? 'fa-sun' : 'fa-moon'"></i>
      </button>

      <!-- CARRITO -->
      <div class="cart-icon" (click)="toggleCartPreview($event)">
        <i class="fa-solid fa-cart-shopping"></i>
        <span class="cart-count">{{ cartCount }}</span>

        <!-- PREVIEW DEL CARRITO -->
        <div class="cart-preview" [ngClass]="{ active: cartOpen }" (click)="$event.stopPropagation()">
          <ng-container *ngIf="cartItems.length; else emptyCart">
            <div class="cart-items">
              <div class="cart-item" *ngFor="let item of cartItems">
                <img [src]="item.image || 'assets/img/placeholder.png'" alt="Producto" />
                <div class="cart-item-info">
                  <div class="cart-item-name">{{ item.name }}</div>
                  <div class="cart-item-price">{{ item.price | currency }}</div>
                </div>
                <button class="cart-item-remove" (click)="removeItem(item)">
                  <i class="fa-solid fa-xmark"></i>
                </button>
              </div>
            </div>

            <div class="cart-total">
              <span>Total:</span>
              <span>{{ total | currency }}</span>
            </div>
          </ng-container>

          <ng-template #emptyCart>
            <div class="empty-cart">
              <p>Carrito vacío</p>
              <p>Total: $0.00</p>
            </div>
          </ng-template>

          <div class="cart-actions">
            <button class="btn btn-outline" (click)="openCartModal($event)">Ver Carrito</button>
            <button class="btn btn-primary">Comprar</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL -->
  <app-car-modal *ngIf="showModal" (close)="closeCartModal()"></app-car-modal>
</header>
